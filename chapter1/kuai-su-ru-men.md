## 快速入门

#### 本文档为需要快速了解智能运维系统平台的用户提供一个概览，更为完整的智能运维系统平台信息请参阅《运维系统平台用户手册》。

#### 下面通过一个简单的示例来演示运维系统平台的使用。

### 1、创建项目

#### 智能运维系统平台部署完成后，首先需要创建一个项目。

#### 例：现在我们来创建一个为Cloud的项目，选择代理“MS-Server”，按照实际情况填写完成后，点击提交完成项目创建，如图：

![](/assets/入门创建项目.jpg)

### 2、创建用户

#### 在智能运维系统平台部署完成后，系统默认登录用户为root，为了安全考虑不建议用户使用root登录，在创建项目完成后，新建一个用户，用于登录智能运维系统平台。

#### 例：创建一个为Cloud的用户，按照下图所示填写，点击提交完成用户创建，建议设置密码符合密码复杂度要求，如图：

#### ![](/assets/入门创建用户11.jpg)

### 3、创建机房

#### 智能运维系统平台部署完成后，会有一个默认机房，可以再默认机房的基础上进行修改，或创建新的机房。

#### 例：创建一个名词为shareber的机房，根据要求填写，完成创建，如图所示：

![](/assets/入门新建机房.jpg)

### 4、创建告警媒介

#### 告警媒介是用于设置监控监测器是发生告警通知的方式，在发生监控告警时会通过告警媒介，发送给需要通知的用户。目前智能运维系统平台支持邮件告警，下面我们来创建一个新的告警媒介。

#### 例：添加一个名称“告警”的Email告警媒介，首先添加名称“告警”，添加SMTP服务器，“smtp.exmail.qq.com”，依次添加发件人Email、账号、密码，如下图所示：

![](/assets/入门创建告警媒介.jpg)

### 5、添加资源

#### 在完成了上述基本操作后，我们就可以开始添加我们要管理的资源，可以添加三类资源，Linux系统、Windows系统、网络设备，Linux系统与Windows系统添加方式相同，下面我们来演示下Linux与网络设备的添加方式。

#### 例1：添加Linux系统设备

#### 点击页面右上角“监控”，进入监控管理页面，在点击左侧功能栏“资源库”，点击页面右上角“![](/assets/1t.png)”进入列表显示，在此页面进行资源添加，如下图所示：

#### ![](/assets/入门添加资源.jpg)点击新建资源开，选择Linux开始添加资产，如下图所示：

![](/assets/入门添加linux.png)

1. #### 添加资源名称“cloud”；
2. #### 选择所属代理“MS-server”；
3. #### IP地址：172.16.10.12；
4. #### 默认SSH端口：22，如系统有做更改按实际情况添加；
5. #### 域：根据实际情况添加域名；
6. #### 主机名“cloud-server”，根据添加资源的实际情况添加；
7. #### 管理员账号：root或administrator，根据实际情况添加；
8. #### 密码：根据实际情况添加；
9. #### 电源类型：选择需要添加资源的实际电源类型；
10. #### 电源地址：192.168.1.100，根据实际情况添加远程管理卡IP地址；
11. #### 账号、密码：添加远程管理卡账号密码；
12. #### 机柜信息：根据实际情况添加；
13. #### 服务器类型：2U，根据资源实际情况填写；

#### 备注：标注\*的为必填项，如下图所示：

#### ![](/assets/入门添加资源详情.jpg)例2：添加网络设备

#### 点击新建资源，选择网络设备，如下图所示：

![](/assets/入门新建资源网络设备.png)

1. #### 资源名称：cloud-Switch根据实际情况填写；
2. #### 选择所属代理“MS-server”；
3. #### IP地址：172.16.20.13，根据实际情况填写；
4. #### 认证级别：V1、V2C、V3，根据网络设备实际情况选择；
5. #### community：根据交换机SNMP值填写
6. #### 机柜信息：根据实际情况添加；

   #### 备注：标注\*的为必填项，如下图所示：

#### ![](/assets/入门添加网络设备.jpg)

### 6、一键部署Agent

#### 点击页面右上角“监控”，进入监控管理页面，在点击左侧功能栏“资源库”，点击页面右上角“![](/assets/1t.png)”进入列表显示，在此页面进行资源添加，如下图所示：

#### ![](/assets/入门添加资源.jpg)

#### 点击“部署”一键部署Agent，如下图所示：

![](/assets/入门部署Agent.png)

### 7、添加插件

#### 在部署Agent完成后，我们只是能够监控到资源的基础信息，像资源内部署的应用是监控不到的，所有我们首先需要添加插件，根据我们的实际生产情况进行插件添加；

#### 例：现在我们添加的资源中有一台部署了Ceph，现在我们需要在插件配置中进行添加；

#### 首先，我们点击左侧功能栏“插件配置”，进入插件配置页面，点击“新建配置”，如下图所示：

#### ![](/assets/入门添加插件.png)

#### 点击“新建配置”进，进入添加配置页面；添加配置名称“cloud-Ceph”，选择插件“service.ceph”，选择部署了Ceph的资源，点击提交完成添加配置，如下图所示：

![](/assets/入门添加插件配置.png)

### 8、添加监测器告警

#### 将所有的插件添加完成后，我们就可以开始进行监测器的添加了，下面点击“新建监测器”按钮，进入监测器选择界面，可见到有5种监测器（Linux、Windows、网络设备、IPMI、拨测）可以新建，如图：

![](/assets/新建监测器.png)

#### 进入Linux、Windows、网络设备新建监测器界面，可以看到如下图所示表单。新建监测器需要选择一个指标，一台或者多台主机资源进行监测。

#### 例：为CPJF-storage03添加cpu.busy的指标监测，在cpu.busy大于50%时间在5分钟以上的时候出发紧急告警并通知lwj，同时执行重启操作。在cpu.busy大于30%在5分钟以上，触发警告告警并通知用户lwj，同时执行任务操作test；在lwj没有及时处理时发送告警通知到中级用户shangsan，在都没有能够解决时向高级用户lisi发送告警通知。

#### 1、定义告警条件

#### 资源：CPJF-storage03选择需要添加监测器的资源（一个或多个）

#### 指标：选择cpu.busy（CPU忙碌时间百分比）

#### 聚合方法： all（可选择：all、max、sum、avg、diff、diff）

#### 指标参数：cpu.busy没有可选参数（在选择disk、net时需要选择对应的指标参数）

#### 开始时间：00:00监测器开始时间；

#### 结束时间：24:00监测器结束时间；

#### 紧急： &lt;30%，最近5分钟

#### 告警：&lt;50%，最近5分钟

#### 异常（无数据）任务类型：无（根据实际情况选择要执行的任务）

#### 2、定义告警内容

#### 标题：CPU忙碌时间

#### 3、定制执行动作

#### 告警媒介：Email

#### 通知用户：lwj

#### 中级用户：zhangsan

#### 高级用户：lisi

#### 备注：标注\*的为必填项，如下图所示：

![](/assets/新建监测器1.png)

## IPMI监测器

#### 例：新建CPJF-compute05、CPJF-compute06、IPMI监测器，检测资源IPMI远程管理卡存活情况。

#### 标题：远程管理卡监测

#### 资源：CPJF-compute05、CPJF-compute06

#### 告警媒介：Email

#### 通知用户：lwj

#### 中级用户：zhangsan

#### 高级用户：lisi

#### 备注：标\*为必填项，如下图所示：

![](/assets/入门IPMI1.png)

## 拨测

#### 例：新建CPJF-compute05、CPJF-compute06拨测，监测资源连通性。

#### 标题：Fping监测

#### 类型：fping（fping、port、http）

#### 资源：CPJF-compute05、CPJF-compute06

#### 周期：1

#### 丢包率告警：5%

#### 延时告警：10

#### 开始时间：00:00

#### 结束时间：02:00

#### 告警媒介：Email

#### 通知用户：lisi

#### 中级用户：zhangsan

#### 高级用户：lwj

#### 备注：标\*为必填项，如下图所示：

![](/assets/入门拨测.png)

### 9、添加仪表盘

#### 在监测器添加完成后，可以通过添加仪表盘实时的直观的了解想要监控指标的运行情况。下面我们来添加一个监测指标了解怎样完成仪表盘的添加。

#### 例：添加CPJF-storage03的CPU忙碌时间的仪表盘；

#### 标题：CPU忙碌时间

#### 类型：时间序列（时间序列、资源球、事件流）

#### 指标（可同时添加多个指标）

#### 资产类型：Linux（Linux、Windows、网络设备）

#### 资源：CPJF-storage03

#### 汇聚方法：AVERAGE（AVERAGE、MAX、MIN）

#### 图表类型：曲线图（曲线图、面积图、柱状图）

#### 指标名称：cpu.busy

#### 指标参数：无（在指标名称选择disk、net时需要选择对应的指标参数）

#### 标记

#### 标记线y：50（根据具体情况确定该数值）

#### 显示为：提醒（错误、正常、警告、提醒）

#### 名称：自动生成

#### 如下图所示：

![](/assets/QQ图片20171107103836.png)

### 10、添加自定义模块

#### 自定义模块方便运维人员管理维运维脚本，自定义模块提供Python、Shell两种脚本模式，下面我们添加一个Shell脚本来直观的了解下自定义模块是怎样添加的。

#### 例：创建一个“查看服务器资源利用率”的Shell脚本；

#### 名称：查看资源利用率

#### 描述：查看服务器资源利用率

#### 添加输入参数：无（根据脚本中变量输入相关的参数，例如：我们脚本中是一个乘法的公式，可输入10就相当于是10\*10=100）

#### 输入脚本内容：选择Shell，填写相应的脚本信息

#### 备注：标\*项为必填项，如下图所示：

![](/assets/入门自定义模板.jpg)

### 11、添加操作

### 操作是为编排跟作业提供基础动作任务的，可对Windows、Linux、网络设备、三种类型 添加操作。

#### 例：添加一个类型为Linux，查看资源利用率的自定义模块；

#### 名称：

#### 类型：

#### 超时时长：

#### 描述：

#### 模块：

#### 备注：标\*项为必填项，如下图所示：



### 12、添加编排

### 

### 13、添加作业

#### 



